export default function(e){var t=(e=e||{}).lazyClass||"lazy",o=e.lazyBackgroundClass||"lazy-bg",r="idleLoadTimeout"in e?e.idleLoadTimeout:200,a=e.observeChanges||!1,i=e.events||{},n=window,s="requestIdleCallback",d="IntersectionObserver",l=["srcset","src","poster"],c=[],v=(e,r)=>c.slice.call((r||document).querySelectorAll(e||"img."+t+",video."+t+",iframe."+t+",."+o)),u=t=>{var r,a,i=t.parentNode;for(var n in"PICTURE"==i.nodeName&&(a=i),"VIDEO"==t.nodeName&&(a=t),r=v("source",a))f(r[n]);f(t),t.autoplay&&t.load();var s=t.classList;s.contains(o)&&(s.remove(o),s.add(e.lazyBackgroundLoaded||"lazy-bg-loaded"))},b=e=>{for(var t in i)e.addEventListener(t,i[t].listener||i[t],i[t].options||void 0);h.observe(e)},f=e=>{l.forEach(t=>{t in e.dataset&&n.requestAnimationFrame(()=>{e.setAttribute(t,e.dataset[t])})})},g=v();if(/baidu|(?:google|bing|yandex|duckduck)bot/i.test(navigator.userAgent))for(var m in g)u(g[m]);else if(d in n&&d+"Entry"in n){var h=new n[d]((e,o)=>{e.forEach(e=>{if(e.isIntersecting||e.intersectionRatio){var i=e.target;s in n&&r?n[s](()=>{u(i)},{timeout:r}):u(i),i.classList.remove(t),o.unobserve(i),(g=g.filter(e=>e!=i)).length||a||h.disconnect()}})},{rootMargin:("threshold"in e?e.threshold:200)+"px 0%"});for(var y in g)b(g[y]);a&&new MutationObserver(()=>{v().forEach(e=>{g.indexOf(e)<0&&(g.push(e),b(e))})}).observe(v(e.observeRootSelector||"body")[0],e.mutationObserverOptions||{childList:!0,subtree:!0})}}
